<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Making R source code chunk interactive inside HTML document | Introduction to Data Science</title>
  <meta name="description" content="This is an open source textbook for teaching introductory data science." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Making R source code chunk interactive inside HTML document | Introduction to Data Science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is an open source textbook for teaching introductory data science." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Making R source code chunk interactive inside HTML document | Introduction to Data Science" />
  
  <meta name="twitter:description" content="This is an open source textbook for teaching introductory data science." />
  

<meta name="author" content="Tiffany-Anne Timbers" />
<meta name="author" content="Trevor Campbell" />
<meta name="author" content="Melissa Lee" />


<meta name="date" content="2020-08-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="reading.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to Data Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction to Data Science</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#chapter-learning-objectives"><i class="fa fa-check"></i><b>1.1</b> Chapter learning objectives</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#jupyter-notebooks"><i class="fa fa-check"></i><b>1.2</b> Jupyter notebooks</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#loading-a-spreadsheet-like-dataset"><i class="fa fa-check"></i><b>1.3</b> Loading a spreadsheet-like dataset</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="making-r-source-code-chunk-interactive-inside-html-document.html"><a href="making-r-source-code-chunk-interactive-inside-html-document.html"><i class="fa fa-check"></i><b>2</b> Making R source code chunk interactive inside HTML document</a><ul>
<li class="chapter" data-level="2.1" data-path="making-r-source-code-chunk-interactive-inside-html-document.html"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#assigning-value-to-a-data-frame"><i class="fa fa-check"></i><b>2.1</b> Assigning value to a data frame</a></li>
<li class="chapter" data-level="2.2" data-path="making-r-source-code-chunk-interactive-inside-html-document.html"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#creating-subsets-of-data-frames-with-select-filter"><i class="fa fa-check"></i><b>2.2</b> Creating subsets of data frames with <code>select</code> &amp; <code>filter</code></a><ul>
<li class="chapter" data-level="2.2.1" data-path="making-r-source-code-chunk-interactive-inside-html-document.html"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#using-select-to-extract-multiple-columns"><i class="fa fa-check"></i><b>2.2.1</b> Using <code>select</code> to extract multiple columns</a></li>
<li class="chapter" data-level="2.2.2" data-path="making-r-source-code-chunk-interactive-inside-html-document.html"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#using-select-to-extract-a-range-of-columns"><i class="fa fa-check"></i><b>2.2.2</b> Using <code>select</code> to extract a range of columns</a></li>
<li class="chapter" data-level="2.2.3" data-path="making-r-source-code-chunk-interactive-inside-html-document.html"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#using-filter-to-extract-a-single-row"><i class="fa fa-check"></i><b>2.2.3</b> Using <code>filter</code> to extract a single row</a></li>
<li class="chapter" data-level="2.2.4" data-path="making-r-source-code-chunk-interactive-inside-html-document.html"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#using-filter-to-extract-rows-with-values-above-a-threshold"><i class="fa fa-check"></i><b>2.2.4</b> Using <code>filter</code> to extract rows with values above a threshold</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="making-r-source-code-chunk-interactive-inside-html-document.html"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#exploring-data-with-visualizations"><i class="fa fa-check"></i><b>2.3</b> Exploring data with visualizations</a><ul>
<li class="chapter" data-level="2.3.1" data-path="making-r-source-code-chunk-interactive-inside-html-document.html"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#using-ggplot-to-create-a-scatter-plot"><i class="fa fa-check"></i><b>2.3.1</b> Using <code>ggplot</code> to create a scatter plot</a></li>
<li class="chapter" data-level="2.3.2" data-path="making-r-source-code-chunk-interactive-inside-html-document.html"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#using-ggplot-to-create-a-scatter-plot-1"><i class="fa fa-check"></i><b>2.3.2</b> Using <code>ggplot</code> to create a scatter plot</a></li>
<li class="chapter" data-level="2.3.3" data-path="making-r-source-code-chunk-interactive-inside-html-document.html"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#formatting-ggplot-objects"><i class="fa fa-check"></i><b>2.3.3</b> Formatting ggplot objects</a></li>
<li class="chapter" data-level="2.3.4" data-path="making-r-source-code-chunk-interactive-inside-html-document.html"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#coloring-points-by-group"><i class="fa fa-check"></i><b>2.3.4</b> Coloring points by group</a></li>
<li class="chapter" data-level="2.3.5" data-path="making-r-source-code-chunk-interactive-inside-html-document.html"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#putting-it-all-together"><i class="fa fa-check"></i><b>2.3.5</b> Putting it all together</a></li>
<li class="chapter" data-level="2.3.6" data-path="making-r-source-code-chunk-interactive-inside-html-document.html"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#whats-next"><i class="fa fa-check"></i><b>2.3.6</b> What’s next?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="reading.html"><a href="reading.html"><i class="fa fa-check"></i><b>3</b> Reading in data locally and from the web</a><ul>
<li class="chapter" data-level="3.1" data-path="reading.html"><a href="reading.html#overview"><i class="fa fa-check"></i><b>3.1</b> Overview</a></li>
<li class="chapter" data-level="3.2" data-path="index.html"><a href="index.html#chapter-learning-objectives"><i class="fa fa-check"></i><b>3.2</b> Chapter learning objectives</a></li>
<li class="chapter" data-level="3.3" data-path="reading.html"><a href="reading.html#absolute-and-relative-file-paths"><i class="fa fa-check"></i><b>3.3</b> Absolute and relative file paths</a></li>
<li class="chapter" data-level="3.4" data-path="reading.html"><a href="reading.html#reading-tabular-data-from-a-plain-text-file-into-r"><i class="fa fa-check"></i><b>3.4</b> Reading tabular data from a plain text file into R</a><ul>
<li class="chapter" data-level="3.4.1" data-path="reading.html"><a href="reading.html#skipping-rows-when-reading-in-data"><i class="fa fa-check"></i><b>3.4.1</b> Skipping rows when reading in data</a></li>
<li class="chapter" data-level="3.4.2" data-path="reading.html"><a href="reading.html#read_delim-as-a-more-flexible-method-to-get-tabular-data-into-r"><i class="fa fa-check"></i><b>3.4.2</b> <code>read_delim</code> as a more flexible method to get tabular data into R</a></li>
<li class="chapter" data-level="3.4.3" data-path="reading.html"><a href="reading.html#reading-tabular-data-directly-from-a-url"><i class="fa fa-check"></i><b>3.4.3</b> Reading tabular data directly from a URL</a></li>
<li class="chapter" data-level="3.4.4" data-path="reading.html"><a href="reading.html#previewing-a-data-file-before-reading-it-into-r"><i class="fa fa-check"></i><b>3.4.4</b> Previewing a data file before reading it into R</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="reading.html"><a href="reading.html#reading-data-from-an-microsoft-excel-file"><i class="fa fa-check"></i><b>3.5</b> Reading data from an Microsoft Excel file</a></li>
<li class="chapter" data-level="3.6" data-path="reading.html"><a href="reading.html#reading-data-from-a-database"><i class="fa fa-check"></i><b>3.6</b> Reading data from a database</a><ul>
<li class="chapter" data-level="3.6.1" data-path="reading.html"><a href="reading.html#reading-data-from-a-sqlite-database"><i class="fa fa-check"></i><b>3.6.1</b> Reading data from a SQLite database</a></li>
<li class="chapter" data-level="3.6.2" data-path="reading.html"><a href="reading.html#reading-data-from-a-postgresql-database"><i class="fa fa-check"></i><b>3.6.2</b> Reading data from a PostgreSQL database</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="reading.html"><a href="reading.html#writing-data-from-r-to-a-.csv-file"><i class="fa fa-check"></i><b>3.7</b> Writing data from R to a <code>.csv</code> file</a></li>
<li class="chapter" data-level="3.8" data-path="reading.html"><a href="reading.html#scraping-data-off-the-web-using-r"><i class="fa fa-check"></i><b>3.8</b> Scraping data off the web using R</a><ul>
<li class="chapter" data-level="3.8.1" data-path="reading.html"><a href="reading.html#html-and-css-selectors"><i class="fa fa-check"></i><b>3.8.1</b> HTML and CSS selectors</a></li>
<li class="chapter" data-level="3.8.2" data-path="reading.html"><a href="reading.html#are-you-allowed-to-scrape-that-website"><i class="fa fa-check"></i><b>3.8.2</b> Are you allowed to scrape that website?</a></li>
<li class="chapter" data-level="3.8.3" data-path="reading.html"><a href="reading.html#using-rvest"><i class="fa fa-check"></i><b>3.8.3</b> Using <code>rvest</code></a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="reading.html"><a href="reading.html#additional-readingsresources"><i class="fa fa-check"></i><b>3.9</b> Additional readings/resources</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="wrangling.html"><a href="wrangling.html"><i class="fa fa-check"></i><b>4</b> Cleaning and wrangling data</a><ul>
<li class="chapter" data-level="4.1" data-path="reading.html"><a href="reading.html#overview"><i class="fa fa-check"></i><b>4.1</b> Overview</a></li>
<li class="chapter" data-level="4.2" data-path="index.html"><a href="index.html#chapter-learning-objectives"><i class="fa fa-check"></i><b>4.2</b> Chapter learning objectives</a></li>
<li class="chapter" data-level="4.3" data-path="wrangling.html"><a href="wrangling.html#vectors-and-data-frames"><i class="fa fa-check"></i><b>4.3</b> Vectors and Data frames</a><ul>
<li class="chapter" data-level="4.3.1" data-path="wrangling.html"><a href="wrangling.html#what-is-a-data-frame"><i class="fa fa-check"></i><b>4.3.1</b> What is a data frame?</a></li>
<li class="chapter" data-level="4.3.2" data-path="wrangling.html"><a href="wrangling.html#what-is-a-vector"><i class="fa fa-check"></i><b>4.3.2</b> What is a vector?</a></li>
<li class="chapter" data-level="4.3.3" data-path="wrangling.html"><a href="wrangling.html#how-are-vectors-different-from-a-list"><i class="fa fa-check"></i><b>4.3.3</b> How are vectors different from a list?</a></li>
<li class="chapter" data-level="4.3.4" data-path="wrangling.html"><a href="wrangling.html#what-does-this-have-to-do-with-data-frames"><i class="fa fa-check"></i><b>4.3.4</b> What does this have to do with data frames?</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="wrangling.html"><a href="wrangling.html#tidy-data"><i class="fa fa-check"></i><b>4.4</b> Tidy Data</a><ul>
<li class="chapter" data-level="4.4.1" data-path="wrangling.html"><a href="wrangling.html#what-is-tidy-data"><i class="fa fa-check"></i><b>4.4.1</b> What is tidy data?</a></li>
<li class="chapter" data-level="4.4.2" data-path="wrangling.html"><a href="wrangling.html#why-is-tidy-data-important-in-r"><i class="fa fa-check"></i><b>4.4.2</b> Why is tidy data important in R?</a></li>
<li class="chapter" data-level="4.4.3" data-path="wrangling.html"><a href="wrangling.html#going-from-wide-to-long-or-tidy-using-gather"><i class="fa fa-check"></i><b>4.4.3</b> Going from wide to long (or tidy!) using <code>gather</code></a></li>
<li class="chapter" data-level="4.4.4" data-path="wrangling.html"><a href="wrangling.html#using-separate-to-deal-with-multiple-delimiters"><i class="fa fa-check"></i><b>4.4.4</b> Using separate to deal with multiple delimiters</a></li>
<li class="chapter" data-level="4.4.5" data-path="wrangling.html"><a href="wrangling.html#notes-on-defining-tidy-data"><i class="fa fa-check"></i><b>4.4.5</b> Notes on defining tidy data</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="wrangling.html"><a href="wrangling.html#combining-functions-using-the-pipe-operator"><i class="fa fa-check"></i><b>4.5</b> Combining functions using the pipe operator, <code>%&gt;%</code>:</a><ul>
<li class="chapter" data-level="4.5.1" data-path="wrangling.html"><a href="wrangling.html#using-to-combine-filter-and-select"><i class="fa fa-check"></i><b>4.5.1</b> Using <code>%&gt;%</code> to combine <code>filter</code> and <code>select</code></a></li>
<li class="chapter" data-level="4.5.2" data-path="wrangling.html"><a href="wrangling.html#using-with-more-than-two-functions"><i class="fa fa-check"></i><b>4.5.2</b> Using <code>%&gt;%</code> with more than two functions</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="wrangling.html"><a href="wrangling.html#iterating-over-data-with-group_by-summarize"><i class="fa fa-check"></i><b>4.6</b> Iterating over data with <code>group_by</code> + <code>summarize</code></a><ul>
<li class="chapter" data-level="4.6.1" data-path="wrangling.html"><a href="wrangling.html#calculating-summary-statistics"><i class="fa fa-check"></i><b>4.6.1</b> Calculating summary statistics:</a></li>
<li class="chapter" data-level="4.6.2" data-path="wrangling.html"><a href="wrangling.html#calculating-group-summary-statistics"><i class="fa fa-check"></i><b>4.6.2</b> Calculating group summary statistics:</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="wrangling.html"><a href="wrangling.html#additional-reading-on-the-dplyr-functions"><i class="fa fa-check"></i><b>4.7</b> Additional reading on the <code>dplyr</code> functions</a></li>
<li class="chapter" data-level="4.8" data-path="wrangling.html"><a href="wrangling.html#using-purrrs-map-functions-to-iterate"><i class="fa fa-check"></i><b>4.8</b> Using <code>purrr</code>’s <code>map*</code> functions to iterate</a><ul>
<li class="chapter" data-level="4.8.1" data-path="wrangling.html"><a href="wrangling.html#a-bit-more-about-the-map_-functions"><i class="fa fa-check"></i><b>4.8.1</b> A bit more about the <code>map_*</code> functions</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="reading.html"><a href="reading.html#additional-readingsresources"><i class="fa fa-check"></i><b>4.9</b> Additional readings/resources</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="viz.html"><a href="viz.html"><i class="fa fa-check"></i><b>5</b> Effective data visualization</a><ul>
<li class="chapter" data-level="5.1" data-path="reading.html"><a href="reading.html#overview"><i class="fa fa-check"></i><b>5.1</b> Overview</a></li>
<li class="chapter" data-level="5.2" data-path="index.html"><a href="index.html#chapter-learning-objectives"><i class="fa fa-check"></i><b>5.2</b> Chapter learning objectives</a></li>
<li class="chapter" data-level="5.3" data-path="viz.html"><a href="viz.html#choosing-the-visualization"><i class="fa fa-check"></i><b>5.3</b> Choosing the visualization</a></li>
<li class="chapter" data-level="5.4" data-path="viz.html"><a href="viz.html#refining-the-visualization"><i class="fa fa-check"></i><b>5.4</b> Refining the visualization</a></li>
<li class="chapter" data-level="5.5" data-path="viz.html"><a href="viz.html#creating-visualizations-with-ggplot2"><i class="fa fa-check"></i><b>5.5</b> Creating visualizations with <code>ggplot2</code></a><ul>
<li class="chapter" data-level="5.5.1" data-path="viz.html"><a href="viz.html#the-mauna-loa-co2-data-set"><i class="fa fa-check"></i><b>5.5.1</b> The Mauna Loa CO2 data set</a></li>
<li class="chapter" data-level="5.5.2" data-path="viz.html"><a href="viz.html#the-island-landmass-data-set"><i class="fa fa-check"></i><b>5.5.2</b> The island landmass data set</a></li>
<li class="chapter" data-level="5.5.3" data-path="viz.html"><a href="viz.html#the-old-faithful-eruption-waiting-time-data-set"><i class="fa fa-check"></i><b>5.5.3</b> The Old Faithful eruption / waiting time data set</a></li>
<li class="chapter" data-level="5.5.4" data-path="viz.html"><a href="viz.html#the-michelson-speed-of-light-data-set"><i class="fa fa-check"></i><b>5.5.4</b> The Michelson speed of light data set</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="viz.html"><a href="viz.html#explaining-the-visualization"><i class="fa fa-check"></i><b>5.6</b> Explaining the visualization</a></li>
<li class="chapter" data-level="5.7" data-path="viz.html"><a href="viz.html#saving-the-visualization"><i class="fa fa-check"></i><b>5.7</b> Saving the visualization</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="making-r-source-code-chunk-interactive-inside-html-document" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Making R source code chunk interactive inside HTML document</h1>
<p>Here we add a button to activate interactivity in chunks. By clicking on this
button, it will make the chunks interactive and it will launch an R kernel to
execute some code from these interactive chunks.</p>
<pre><code>state,med_income,med_prop_val,population,mean_commute_minutes,party
AK,64222,197300,733375,10.46830207,Republican
AL,36924,94800,4830620,25.30990746,Republican
AR,35833,83300,2958208,22.40108933,Republican
AZ,44748,128700,6641928,20.58786,Republican
CA,53075,252100,38421464,23.38085172,Democrat
CO,48098,198900,5278906,19.50792188,Democrat
CT,69228,246450,3593222,24.349675,Democrat
DC,70848,475800,647484,28.2534,Democrat
DE,54976,228500,926454,24.45553333,Democrat</code></pre>
<p>To load this data into R, and then to do anything else with it afterwards, we will need to use something called a <em>function.</em>
A function is a special word in R that takes in instructions (we call these <em>arguments</em>) and does something. The function we will
use to read a <code>.csv</code> file into R is called <code>read_csv</code>.</p>
<p>In its most basic use-case, <code>read_csv</code> expects that the data file:</p>
<ul>
<li>has column names (or <em>headers</em>),</li>
<li>uses a comma (<code>,</code>) to separate the columns, and</li>
<li>does not have row names.</li>
</ul>
<p>Below you’ll see the code used to load the data into R using the <code>read_csv</code> function. But there is one extra step we need to do first. Since <code>read_csv</code> is not included in the base installation of R,
to be able to use it we have to load it from somewhere else: a collection of useful functions known as a <em>library</em>. The <code>read_csv</code> function in particular
is in the <code>tidyverse</code> library (more on this later), which we load using the <code>library</code> function.</p>
<p>Next, we call the <code>read_csv</code> function and pass it a single argument: the name of the file, <code>"state_property_vote.csv"</code>. We have to put quotes around filenames and other letters and words that we
use in our code to distinguish it from the special words that make up R programming language. This is the only argument we need to provide for this file, because our file satifies everthing else
the <code>read_csv</code> function expects in the default use-case (which we just discussed). Later in the course, we’ll learn more about how to deal with more complicated files where the default arguments are not
appropriate. For example, files that use spaces or tabs to separate the columns, or with no column names.</p>
<blockquote>
<p>clicking the below button will make this book interactive and that could take some
times to strat. Be patient…</p>
</blockquote>
<button id="activateButton" style="width: 100px; height: 50px; font-size: 1.5em;">Activate</button>
<script type="text/javascript">
// thebelab js script
var bootstrapThebe = function() {
    thebelab.bootstrap();
}
document.querySelector("#activateButton").addEventListener('click', bootstrapThebe)
</script>
<div class="sourceCode" id="cb2" data-executable="true" data-language="r"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb2-1"></a>us_data &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/UBC-DSCI/introduction-to-datascience/master/state_property_vote.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   state = col_character(),
##   med_income = col_double(),
##   med_prop_val = col_double(),
##   population = col_double(),
##   mean_commute_minutes = col_double(),
##   party = col_character()
## )</code></pre>
<div class="sourceCode" id="cb4" data-executable="true" data-language="r"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb4-1"></a>readr<span class="op">::</span><span class="kw">write_csv</span>(us_data, <span class="st">&quot;state_property_vote.csv&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb5" data-executable="true" data-language="r"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb5-1"></a><span class="kw">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching packages ────────────────────────────────────────────────────────────── tidyverse 1.3.0 ──</code></pre>
<pre><code>## ✓ ggplot2 3.3.2          ✓ purrr   0.3.4     
## ✓ tibble  3.0.3          ✓ dplyr   1.0.1     
## ✓ tidyr   1.1.1          ✓ stringr 1.4.0     
## ✓ readr   1.3.1.9000</code></pre>
<pre><code>## ── Conflicts ───────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<div class="sourceCode" id="cb9" data-executable="true" data-language="r"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb9-1"></a><span class="kw">read_csv</span>(<span class="st">&quot;state_property_vote.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   state = col_character(),
##   med_income = col_double(),
##   med_prop_val = col_double(),
##   population = col_double(),
##   mean_commute_minutes = col_double(),
##   party = col_character()
## )</code></pre>
<pre><code>## # A tibble: 52 x 6
##    state med_income med_prop_val population mean_commute_minutes party     
##    &lt;chr&gt;      &lt;dbl&gt;        &lt;dbl&gt;      &lt;dbl&gt;                &lt;dbl&gt; &lt;chr&gt;     
##  1 AK         64222       197300     733375                 10.5 Republican
##  2 AL         36924        94800    4830620                 25.3 Republican
##  3 AR         35833        83300    2958208                 22.4 Republican
##  4 AZ         44748       128700    6641928                 20.6 Republican
##  5 CA         53075       252100   38421464                 23.4 Democrat  
##  6 CO         48098       198900    5278906                 19.5 Democrat  
##  7 CT         69228       246450    3593222                 24.3 Democrat  
##  8 DC         70848       475800     647484                 28.3 Democrat  
##  9 DE         54976       228500     926454                 24.5 Democrat  
## 10 FL         43355       125600   19645772                 24.8 Republican
## # … with 42 more rows</code></pre>
<p>Above you can also see something neat that Jupyter does to help us understand our code: it colours text depending on its meaning in R. For example,
you’ll note that functions get bold green text, while letters and words surrounded by quotations like filenames get blue text.</p>
<blockquote>
<p><strong>In case you want to know more (optional):</strong>
We use the <code>read_csv</code> function from the <code>tidyverse</code> instead of the base R function <code>read.csv</code> because it’s faster and it creates a nicer variant of the base R data frame called a <em>tibble</em>.
This has several benefits that we’ll discuss in further detail later in the course.</p>
</blockquote>
<div id="assigning-value-to-a-data-frame" class="section level2">
<h2><span class="header-section-number">2.1</span> Assigning value to a data frame</h2>
<p>When we loaded the US state-level property, income, population, and voting data in R above using <code>read_csv</code>, we did not give this data frame a name, so it was
just printed to the screen and we cannot do anything else with it. That isn’t very useful; what we would like to do is give a name to the data frame that <code>read_csv</code> outputs
so that we can use it later for analysis and visualization.</p>
<p>To assign name to something in R, there are two possible ways—using either the assignment symbol (<code>&lt;-</code>) or the equals symbol (<code>=</code>). From a style perspective,
the assignment symbol is preferred and is what we will use in this course. When we name something in R using the assignment symbol, <code>&lt;-</code>, we do not need to surround
it with quotes like the filename. This is because we are formally telling R about this word and giving it a value. Only characters and words that act as values need
to be surrounded by quotes.</p>
<p>Let’s now use the assignment symbol to give the name <code>us_data</code> to the US state-level property, income, population, and voting data frame that we get from <code>read_csv</code>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb12-1"></a>us_data &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;state_property_vote.csv&quot;</span>)</span></code></pre></div>
<p>Wait a minute! Nothing happened this time! Or at least it looks like that. But actually something did happen: the data was read in and now has the name <code>us_data</code> associated with it.
And we can use that name to access the data frame and do things with it. First we will type the name of the data frame to print it to the screen.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb13-1"></a>us_data</span></code></pre></div>
<pre><code>## # A tibble: 52 x 6
##    state med_income med_prop_val population mean_commute_minutes party     
##    &lt;chr&gt;      &lt;dbl&gt;        &lt;dbl&gt;      &lt;dbl&gt;                &lt;dbl&gt; &lt;chr&gt;     
##  1 AK         64222       197300     733375                 10.5 Republican
##  2 AL         36924        94800    4830620                 25.3 Republican
##  3 AR         35833        83300    2958208                 22.4 Republican
##  4 AZ         44748       128700    6641928                 20.6 Republican
##  5 CA         53075       252100   38421464                 23.4 Democrat  
##  6 CO         48098       198900    5278906                 19.5 Democrat  
##  7 CT         69228       246450    3593222                 24.3 Democrat  
##  8 DC         70848       475800     647484                 28.3 Democrat  
##  9 DE         54976       228500     926454                 24.5 Democrat  
## 10 FL         43355       125600   19645772                 24.8 Republican
## # … with 42 more rows</code></pre>
</div>
<div id="creating-subsets-of-data-frames-with-select-filter" class="section level2">
<h2><span class="header-section-number">2.2</span> Creating subsets of data frames with <code>select</code> &amp; <code>filter</code></h2>
<p>Now, we are going to learn how to obtain subsets of data from a data frame in R using two other <code>tidyverse</code> functions: <code>select</code> and <code>filter</code>.
The <code>select</code> function allows you to create a subset of the columns of a data frame, while the <code>filter</code> function allows you to obtain a subset of the rows with specific values.</p>
<p>Before we start using <code>select</code> and <code>filter</code>, let’s take a look at the US state-level property, income, and population data again to familiarize ourselves with it.
We will do this by printing the data we loaded earlier in the chapter to the screen.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb15-1"></a>us_data</span></code></pre></div>
<pre><code>## # A tibble: 52 x 6
##    state med_income med_prop_val population mean_commute_minutes party     
##    &lt;chr&gt;      &lt;dbl&gt;        &lt;dbl&gt;      &lt;dbl&gt;                &lt;dbl&gt; &lt;chr&gt;     
##  1 AK         64222       197300     733375                 10.5 Republican
##  2 AL         36924        94800    4830620                 25.3 Republican
##  3 AR         35833        83300    2958208                 22.4 Republican
##  4 AZ         44748       128700    6641928                 20.6 Republican
##  5 CA         53075       252100   38421464                 23.4 Democrat  
##  6 CO         48098       198900    5278906                 19.5 Democrat  
##  7 CT         69228       246450    3593222                 24.3 Democrat  
##  8 DC         70848       475800     647484                 28.3 Democrat  
##  9 DE         54976       228500     926454                 24.5 Democrat  
## 10 FL         43355       125600   19645772                 24.8 Republican
## # … with 42 more rows</code></pre>
<p>In this data frame there are 52 rows (corresponding to the 50 US states, the District of Columbia and the US territory, Puerto Rico)
and 6 columns:</p>
<ol style="list-style-type: decimal">
<li>US state abbreviation</li>
<li>Median household income</li>
<li>Median property value</li>
<li>US state population</li>
<li>Mean commute time in minutes</li>
<li>The party each state voted for in the 2016 US presidential election</li>
</ol>
<p>Now let’s use <code>select</code> to extract the state column from this data frame. To do this, we need to provide the <code>select</code> function with two arguments. The first argument is the
name of the data frame object, which in this example is <code>us_data</code>. The second argument is the column name that we want to select, here <code>state</code>. After passing these two arguments,
the <code>select</code> function returns a single column (the state column that we asked for) as a data frame.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb17-1"></a>state_column &lt;-<span class="st"> </span><span class="kw">select</span>(us_data, state)</span>
<span id="cb17-2"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb17-2"></a>state_column</span></code></pre></div>
<pre><code>## # A tibble: 52 x 1
##    state
##    &lt;chr&gt;
##  1 AK   
##  2 AL   
##  3 AR   
##  4 AZ   
##  5 CA   
##  6 CO   
##  7 CT   
##  8 DC   
##  9 DE   
## 10 FL   
## # … with 42 more rows</code></pre>
<div id="using-select-to-extract-multiple-columns" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Using <code>select</code> to extract multiple columns</h3>
<p>We can also use <code>select</code> to obtain a subset of the data frame with multiple columns. Again, the first argument is the name of the data frame.
Then we list all the columns we want as arguments separated by commas. Here we create a subset of three columns: state, median property value, and mean commute time in minutes.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb19-1"></a>three_columns &lt;-<span class="st"> </span><span class="kw">select</span>(us_data, state, med_prop_val, mean_commute_minutes)</span>
<span id="cb19-2"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb19-2"></a>three_columns</span></code></pre></div>
<pre><code>## # A tibble: 52 x 3
##    state med_prop_val mean_commute_minutes
##    &lt;chr&gt;        &lt;dbl&gt;                &lt;dbl&gt;
##  1 AK          197300                 10.5
##  2 AL           94800                 25.3
##  3 AR           83300                 22.4
##  4 AZ          128700                 20.6
##  5 CA          252100                 23.4
##  6 CO          198900                 19.5
##  7 CT          246450                 24.3
##  8 DC          475800                 28.3
##  9 DE          228500                 24.5
## 10 FL          125600                 24.8
## # … with 42 more rows</code></pre>
</div>
<div id="using-select-to-extract-a-range-of-columns" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Using <code>select</code> to extract a range of columns</h3>
<p>We can also use <code>select</code> to obtain a subset of the data frame constructed from a range of columns. To do this we use the colon (<code>:</code>) operator to denote the range.
For example, to get all the columns in the data frame from <code>state</code> to <code>med_prop_val</code> we pass <code>state:med_prop_val</code> as the second argument to the <code>select</code> function.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb21-1"></a>column_range &lt;-<span class="st"> </span><span class="kw">select</span>(us_data, state<span class="op">:</span>med_prop_val)</span>
<span id="cb21-2"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb21-2"></a>column_range</span></code></pre></div>
<pre><code>## # A tibble: 52 x 3
##    state med_income med_prop_val
##    &lt;chr&gt;      &lt;dbl&gt;        &lt;dbl&gt;
##  1 AK         64222       197300
##  2 AL         36924        94800
##  3 AR         35833        83300
##  4 AZ         44748       128700
##  5 CA         53075       252100
##  6 CO         48098       198900
##  7 CT         69228       246450
##  8 DC         70848       475800
##  9 DE         54976       228500
## 10 FL         43355       125600
## # … with 42 more rows</code></pre>
</div>
<div id="using-filter-to-extract-a-single-row" class="section level3">
<h3><span class="header-section-number">2.2.3</span> Using <code>filter</code> to extract a single row</h3>
<p>We can use the <code>filter</code> function to obtain the subset of rows with desired values from a data frame. Again, our first argument is the name of the data frame object, <code>us_data</code>.
The second argument is a logical statement to use when filtering the rows. Here, for example, we’ll say that we are interested in rows where state equals NY (for New York). To make
this comparison, we use the <em>equivalency operator</em> <code>==</code> to compare the values of the <code>state</code> column with the value <code>"NY"</code>. Similar to when we loaded the data file and put quotes around the filename,
here we need to put quotes around <code>"NY"</code> to tell R that this is a character value and not one of the special words that make up R programming language, nor one of the names
we have given to data frames in the code we have already written.</p>
<p>With these arguments, <code>filter</code> returns a data frame that has all the columns of the input data frame but only the rows we asked for in our logical filter statement.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb23-1"></a>new_york &lt;-<span class="st"> </span><span class="kw">filter</span>(us_data, state <span class="op">==</span><span class="st"> &quot;NY&quot;</span>)</span>
<span id="cb23-2"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb23-2"></a>new_york</span></code></pre></div>
<pre><code>## # A tibble: 1 x 6
##   state med_income med_prop_val population mean_commute_minutes party   
##   &lt;chr&gt;      &lt;dbl&gt;        &lt;dbl&gt;      &lt;dbl&gt;                &lt;dbl&gt; &lt;chr&gt;   
## 1 NY         50839       134150   19673174                 24.4 Democrat</code></pre>
</div>
<div id="using-filter-to-extract-rows-with-values-above-a-threshold" class="section level3">
<h3><span class="header-section-number">2.2.4</span> Using <code>filter</code> to extract rows with values above a threshold</h3>
<p>If we are interested in finding information about the states who have a longer mean commute time than New York—whose mean commute time is 21.5 minutes—then we can create a filter
to obtain rows where the value of <code>mean_commute_minutes</code> is greater than 21.5.
In this case, we see that <code>filter</code> returns a data frame with 33 rows; this indicates that there are 33
states with longer commute times on average than New York.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb25-1"></a>long_commutes &lt;-<span class="st"> </span><span class="kw">filter</span>(us_data, mean_commute_minutes <span class="op">&gt;</span><span class="st"> </span><span class="fl">21.5</span>)</span>
<span id="cb25-2"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb25-2"></a>long_commutes</span></code></pre></div>
<pre><code>## # A tibble: 33 x 6
##    state med_income med_prop_val population mean_commute_minutes party     
##    &lt;chr&gt;      &lt;dbl&gt;        &lt;dbl&gt;      &lt;dbl&gt;                &lt;dbl&gt; &lt;chr&gt;     
##  1 AL         36924        94800    4830620                 25.3 Republican
##  2 AR         35833        83300    2958208                 22.4 Republican
##  3 CA         53075       252100   38421464                 23.4 Democrat  
##  4 CT         69228       246450    3593222                 24.3 Democrat  
##  5 DC         70848       475800     647484                 28.3 Democrat  
##  6 DE         54976       228500     926454                 24.5 Democrat  
##  7 FL         43355       125600   19645772                 24.8 Republican
##  8 GA         37865       101700   10006693                 24.5 Republican
##  9 IL         47898        97350   12873761                 22.6 Democrat  
## 10 IN         47194       111800    6568645                 23.5 Republican
## # … with 23 more rows</code></pre>
</div>
</div>
<div id="exploring-data-with-visualizations" class="section level2">
<h2><span class="header-section-number">2.3</span> Exploring data with visualizations</h2>
<p>Creating effective data visualizations is an essential piece to any data analysis. For the remainder of Chapter 1, we will learn how to use
functions from the <code>tidyverse</code> to make visualizations that let us explore relationships in data. In particular, we’ll develop a visualization
of the US property, income, population, and voting data we’ve been working with that will help us understand two potential relationships in the data:
first, the relationship between median household income and median propery value across the US, and second, whether there is a pattern in which party each state
voted for in the 2016 US election. This is an example of an exploratory data analysis
question: we are looking for relationships and patterns within the data set we have, but are not trying to generalize what we find beyond this data set.</p>
<div id="using-ggplot-to-create-a-scatter-plot" class="section level3">
<h3><span class="header-section-number">2.3.1</span> Using <code>ggplot</code> to create a scatter plot</h3>
<p>Taking another look at our dataset below, we can immediately see that the three columns (or variables) we are interested in visualizing—median household
income, median property value, and election result—are all in separate columns. In addition, there is a single row (or observation) for each state.
The data are therefore in what we call a <em>tidy data</em> format.
This is particularly important and will be a major focus in the remainder of this course: many of the functions from <code>tidyverse</code> require tidy data,
including the <code>ggplot</code> function that we will use shortly for our visualization. Note below that we use the <code>print</code> function to display the <code>us_data</code> rather
than just typing <code>us_data</code>; for data frames, these do the same thing.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb27-1"></a><span class="kw">print</span>(us_data)</span></code></pre></div>
<pre><code>## # A tibble: 52 x 6
##    state med_income med_prop_val population mean_commute_minutes party     
##    &lt;chr&gt;      &lt;dbl&gt;        &lt;dbl&gt;      &lt;dbl&gt;                &lt;dbl&gt; &lt;chr&gt;     
##  1 AK         64222       197300     733375                 10.5 Republican
##  2 AL         36924        94800    4830620                 25.3 Republican
##  3 AR         35833        83300    2958208                 22.4 Republican
##  4 AZ         44748       128700    6641928                 20.6 Republican
##  5 CA         53075       252100   38421464                 23.4 Democrat  
##  6 CO         48098       198900    5278906                 19.5 Democrat  
##  7 CT         69228       246450    3593222                 24.3 Democrat  
##  8 DC         70848       475800     647484                 28.3 Democrat  
##  9 DE         54976       228500     926454                 24.5 Democrat  
## 10 FL         43355       125600   19645772                 24.8 Republican
## # … with 42 more rows</code></pre>
</div>
<div id="using-ggplot-to-create-a-scatter-plot-1" class="section level3">
<h3><span class="header-section-number">2.3.2</span> Using <code>ggplot</code> to create a scatter plot</h3>
<p>We will begin with a scatter plot of the income and property value columns from our data frame.
To create a scatter plot of these two variables using the <code>ggplot</code> function, we do the following:</p>
<ol style="list-style-type: decimal">
<li>call the <code>ggplot</code> function</li>
<li>provide the name of the data frame as the first argument</li>
<li>call the aesthetic function, <code>aes</code>, to specify which column will correspond to the x-axis and which will correspond to the y-axis</li>
<li>add a <code>+</code> symbol at the end of the <code>ggplot</code> call to add a layer to the plot</li>
<li>call the <code>geom_point</code> function to tell R that we want to represent the data points as dots/points to create a scatter plot.</li>
</ol>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb29-1"></a><span class="kw">ggplot</span>(us_data, <span class="kw">aes</span>(<span class="dt">x =</span> med_income, <span class="dt">y =</span> med_prop_val)) <span class="op">+</span></span>
<span id="cb29-2"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb29-2"></a><span class="st">    </span><span class="kw">geom_point</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/prop_val_vs_income-1.png" width="456" /></p>
<blockquote>
<p><strong>In case you have used R before and are curious:</strong>
There are a small number of situations in which you can have a single R expression span multiple lines.
Here, the <code>+</code> symbol at the end of the first line tells R that the expression isn’t done yet and to
continue reading on the next line. While not strictly necessary, this sort of pattern will appear a
lot when using <code>ggplot</code> as it keeps things more readable.</p>
</blockquote>
</div>
<div id="formatting-ggplot-objects" class="section level3">
<h3><span class="header-section-number">2.3.3</span> Formatting ggplot objects</h3>
<p>One common and easy way to format your <code>ggplot</code> visualization is to add additional layers to the plot object using the <code>+</code> symbol.
For example, we can use the <code>xlab</code> and <code>ylab</code> functions to add layers where we specify human readable labels for the x and y axes.
Again, since we are specifying words (e.g. <code>"Income (USD)"</code>) as arguments to <code>xlab</code> and <code>ylab</code>, we surround them with double quotes.
There are many more layers we can add to format the plot further, and we will explore these in later chapters.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb30-1"></a><span class="kw">ggplot</span>(us_data, <span class="kw">aes</span>(<span class="dt">x =</span> med_income, <span class="dt">y =</span> med_prop_val)) <span class="op">+</span></span>
<span id="cb30-2"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb30-2"></a><span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb30-3"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb30-3"></a><span class="st">    </span><span class="kw">xlab</span>(<span class="st">&quot;Income (USD)&quot;</span>) <span class="op">+</span></span>
<span id="cb30-4"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb30-4"></a><span class="st">    </span><span class="kw">ylab</span>(<span class="st">&quot;Median property value (USD)&quot;</span>)    </span></code></pre></div>
<p><img src="_main_files/figure-html/prop_val_vs_income_human_labs-1.png" width="456" /></p>
<p>From this visualization we see that for the 52 US regions in this data set, as median household income increases so does median property value. When we see
two variables do this, we call this a <em>positive relationship</em>. Because the increasing pattern is fairly clear
(not fuzzy) we can say that the relationship is strong. Because of the data point in the lower left-hand corner, drawing a straight line through these
points wouldn’t fit very well. When a straight-line doesn’t fit the data well we say that it’s non-linear. However, we should have caution when using one point to claim non-linearity. As we will see later, this might be due to a single point not really belonging in the data set (this is often called an outlier).</p>
<p>Learning how to describe data visualizations is a very useful skill. We will provide descriptions for you in this course (as we did above) until we get to Chapter 4,
which focuses on data visualization. Then, we will explicitly teach you how to do this yourself, and how to not over-state or over-interpret the results
from a visualization.</p>
</div>
<div id="coloring-points-by-group" class="section level3">
<h3><span class="header-section-number">2.3.4</span> Coloring points by group</h3>
<p>Now we’ll move onto the second part of our exploratory data analysis question: when considering the relationship between median household income and median property
value, is there a pattern in which party each state voted for in the 2016 US election? One common way to explore this is to colour the data points on the
scatter plot we have already created by group/category. For example,
given that we have the party each state voted for in the 2016 US Presidential election in the column named <code>party</code>, we can colour the points in our previous
scatter plot to represent who each stated voted for.</p>
<p>To do this we modify our scatter plot code above. Specifically, we will add an argument to the <code>aes</code> function, specifying that the points should be coloured by the <code>party</code> column:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb31-1"></a><span class="kw">ggplot</span>(us_data, <span class="kw">aes</span>(<span class="dt">x =</span> med_income, <span class="dt">y =</span> med_prop_val, <span class="dt">color =</span> party)) <span class="op">+</span></span>
<span id="cb31-2"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb31-2"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb31-3"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb31-3"></a><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Income (USD)&quot;</span>) <span class="op">+</span></span>
<span id="cb31-4"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb31-4"></a><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Median property value (USD)&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/scatter_colour_by_party-1.png" width="552" /></p>
<p>This data visualization shows that the one data point we singled out earlier on the far left of the plot has the label of “not applicable” instead of “democrat” or “republican”.
Let’s use filter to look at the row that contains the “not applicable” value in the party column:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb32-1"></a>missing_party &lt;-<span class="st"> </span><span class="kw">filter</span>(us_data, party <span class="op">==</span><span class="st"> &quot;Not Applicable&quot;</span>)</span>
<span id="cb32-2"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb32-2"></a>missing_party</span></code></pre></div>
<pre><code>## # A tibble: 0 x 6
## # … with 6 variables: state &lt;chr&gt;, med_income &lt;dbl&gt;, med_prop_val &lt;dbl&gt;,
## #   population &lt;dbl&gt;, mean_commute_minutes &lt;dbl&gt;, party &lt;fct&gt;</code></pre>
<p>That explains it! That row in the dataset is actually not a US state, but rather the US territory of Peurto Rico. Similar to other US territories, residents of Puerto Rico
cannot vote in presidential elections. Hence the “not applicable” label. Let’s remove this row from the data frame and rename the data frame <code>vote_data</code>.
To do this, we use the opposite of the equivalency operator (<code>==</code>) for our filter statement, the not equivalent operator (<code>!=</code>).</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb34-1"></a>vote_data &lt;-<span class="st"> </span><span class="kw">filter</span>(us_data, party <span class="op">!=</span><span class="st"> &quot;Not Applicable&quot;</span>)</span>
<span id="cb34-2"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb34-2"></a>vote_data</span></code></pre></div>
<pre><code>## # A tibble: 51 x 6
##    state med_income med_prop_val population mean_commute_minutes party     
##    &lt;chr&gt;      &lt;dbl&gt;        &lt;dbl&gt;      &lt;dbl&gt;                &lt;dbl&gt; &lt;fct&gt;     
##  1 AK         64222       197300     733375                 10.5 Republican
##  2 AL         36924        94800    4830620                 25.3 Republican
##  3 AR         35833        83300    2958208                 22.4 Republican
##  4 AZ         44748       128700    6641928                 20.6 Republican
##  5 CA         53075       252100   38421464                 23.4 Democrat  
##  6 CO         48098       198900    5278906                 19.5 Democrat  
##  7 CT         69228       246450    3593222                 24.3 Democrat  
##  8 DC         70848       475800     647484                 28.3 Democrat  
##  9 DE         54976       228500     926454                 24.5 Democrat  
## 10 FL         43355       125600   19645772                 24.8 Republican
## # … with 41 more rows</code></pre>
<p>Now we see that the data frame has 51 rows corresponding to the 50 states and the District of Columbia - all regions where residents can vote in US presidential elections.
Let’s now recreate the scatter plot we made above using this data frame subset:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb36-1"></a><span class="kw">ggplot</span>(vote_data, <span class="kw">aes</span>(<span class="dt">x =</span> med_income, <span class="dt">y =</span> med_prop_val, <span class="dt">color =</span> party)) <span class="op">+</span></span>
<span id="cb36-2"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb36-2"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb36-3"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb36-3"></a><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Income (USD)&quot;</span>) <span class="op">+</span></span>
<span id="cb36-4"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb36-4"></a><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Median property value (USD)&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/scatter_colour_by_party_no_PR-1.png" width="552" /></p>
<p>What do we see when considering the second part of our exploratory question? Do we see a pattern in how certain states voted in the 2016 Presidential election? We do!
Most of the US States who voted for the Republican candidate in the 2016 US Presidential election had lower median household income and lower median property values (data points primarily
fall in lower left-hand side of the scatter plot), whereas most of the US states who voted for the Democratic candidate in the 2016 US Presidential election had higher median household
income and higher median property values (data points primarily fall in the upper right-hand side of the scatter plot).</p>
<p>Does this mean that rich states usually vote for Democrats and poorer states generally vote for Republicans? Or could we use this data visualization on its own to predict which party each
state will vote for in the next presidential election? The answer to both these questions is “no.” What we can do with this exploratory data analysis is create new hypotheses, ideas,
and questions (like the ones at the beginning of this paragraph). Answering those questions would likely involve gathering additional data and doing more complex analyses, which we will
see more of later in this course.</p>
</div>
<div id="putting-it-all-together" class="section level3">
<h3><span class="header-section-number">2.3.5</span> Putting it all together</h3>
<p>Below, we put everything from this chapter together in one code chunk. This demonstrates the power of R: in relatively few lines of code, we are able to create an entire data science workflow.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb37-1"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb37-2"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb37-2"></a></span>
<span id="cb37-3"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb37-3"></a>us_data &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;state_property_vote.csv&quot;</span>)</span>
<span id="cb37-4"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb37-4"></a></span>
<span id="cb37-5"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb37-5"></a>vote_data &lt;-<span class="st"> </span><span class="kw">filter</span>(us_data, party <span class="op">!=</span><span class="st"> &quot;Not Applicable&quot;</span>)</span>
<span id="cb37-6"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb37-6"></a></span>
<span id="cb37-7"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb37-7"></a><span class="kw">ggplot</span>(vote_data, <span class="kw">aes</span>(<span class="dt">x =</span> med_income, <span class="dt">y =</span> med_prop_val, <span class="dt">color =</span> party)) <span class="op">+</span></span>
<span id="cb37-8"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb37-8"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb37-9"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb37-9"></a><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Income (USD)&quot;</span>) <span class="op">+</span></span>
<span id="cb37-10"><a href="making-r-source-code-chunk-interactive-inside-html-document.html#cb37-10"></a><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Median property value (USD)&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/nachos_to_cheesecake-1.png" width="552" /></p>
</div>
<div id="whats-next" class="section level3">
<h3><span class="header-section-number">2.3.6</span> What’s next?</h3>
<p>In the next chapter, we will dig in and spend more time learning how to load spreadsheet-like datasets of various formats into R, as well as how to scrape data from the web!</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="reading.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/index.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
